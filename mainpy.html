<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>The Last Light - Text RPG</title>
   <style>
       body {
           background: linear-gradient(135deg, #1a1a2e, #16213e);
           color: #e0e0e0;
           font-family: 'Courier New', monospace;
           margin: 0;
           padding: 20px;
           min-height: 100vh;
       }
       
       .container {
           max-width: 900px;
           margin: 0 auto;
           background: rgba(0, 0, 0, 0.7);
           border-radius: 10px;
           padding: 30px;
           box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
       }
       
       .title {
           text-align: center;
           font-size: 2.5em;
           color: #ffd700;
           margin-bottom: 20px;
           text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
       }
       
       .game-text {
           background: rgba(0, 0, 0, 0.5);
           padding: 20px;
           border-radius: 5px;
           margin: 20px 0;
           border-left: 4px solid #ffd700;
           min-height: 200px;
           font-size: 1.1em;
           line-height: 1.6;
       }
       
       .stats {
           background: rgba(0, 50, 100, 0.3);
           padding: 15px;
           border-radius: 5px;
           margin: 20px 0;
           border: 1px solid #4a90e2;
           font-size: 0.9em;
       }
       
       .input-section {
           margin: 20px 0;
       }
       
       .input-section input {
           width: 70%;
           padding: 12px;
           font-size: 1.1em;
           background: rgba(0, 0, 0, 0.7);
           border: 2px solid #ffd700;
           color: #e0e0e0;
           border-radius: 5px;
           font-family: 'Courier New', monospace;
       }
       
       .input-section button {
           padding: 12px 20px;
           font-size: 1.1em;
           background: #ffd700;
           color: #1a1a2e;
           border: none;
           border-radius: 5px;
           cursor: pointer;
           margin-left: 10px;
           font-family: 'Courier New', monospace;
           font-weight: bold;
       }
       
       .input-section button:hover {
           background: #ffed4a;
       }
       
       .commands {
           display: flex;
           flex-wrap: wrap;
           gap: 10px;
           margin: 20px 0;
       }
       
       .commands button {
           padding: 8px 16px;
           background: rgba(74, 144, 226, 0.3);
           color: #e0e0e0;
           border: 1px solid #4a90e2;
           border-radius: 5px;
           cursor: pointer;
           font-family: 'Courier New', monospace;
       }
       
       .commands button:hover {
           background: rgba(74, 144, 226, 0.5);
       }
       
       .memory {
           color: #ffd700;
           font-style: italic;
       }
       
       .hope-positive {
           color: #4ade80;
       }
       
       .hope-negative {
           color: #f87171;
       }
       
       .typing {
           border-right: 2px solid #ffd700;
           animation: blink 1s infinite;
       }
       
       @keyframes blink {
           0%, 50% { border-color: #ffd700; }
           51%, 100% { border-color: transparent; }
       }
       
       .hidden {
           display: none;
       }
   </style>
</head>
<body>
   <div class="container">
       <div class="title">THE LAST LIGHT</div>
       
       <div class="stats" id="stats">
           <div id="player-stats"></div>
       </div>
       
       <div class="game-text" id="game-text">
           <div id="story-text">The world ended not with fire, but with the slow death of hope.<br>
           You are one of the few who still remember what it means to be human.<br>
           In this broken world, every choice matters.<br>
           Every life you touch changes the fate of what remains.</div>
       </div>
       
       <div class="input-section" id="name-input">
           <input type="text" id="player-name" placeholder="What do they call you, wanderer?" autocomplete="off">
           <button onclick="startGame()">Begin Journey</button>
       </div>
       
       <div class="input-section hidden" id="game-input">
           <input type="text" id="command-input" placeholder="Enter your choice..." autocomplete="off">
           <button onclick="processCommand()">Execute</button>
       </div>
       
       <div class="commands hidden" id="commands">
           <button onclick="executeCommand('stats')">Stats</button>
           <button onclick="executeCommand('wander')">Wander</button>
           <button onclick="executeCommand('rest')">Rest</button>
           <button onclick="executeCommand('remember')">Remember</button>
           <button onclick="executeCommand('inventory')">Inventory</button>
           <button onclick="executeCommand('meditate')">Meditate</button>
           <button onclick="executeCommand('quit')">Quit</button>
       </div>
   </div>

   <script>
       class Player {
           constructor(name) {
               this.name = name;
               this.hp = 100;
               this.max_hp = 100;
               this.level = 1;
               this.exp = 0;
               this.gold = 10;
               this.inventory = ["Bread", "Water", "Faded Photo"];
               this.karma = 0;
               this.relationships = {};
               this.memories = ["Left the safety of the vault"];
               this.sanity = 100;
               this.hope = 50;
               this.days_survived = 0;
           }
           
           stats() {
               return `${this.name} | HP:${this.hp}/${this.max_hp} | Level:${this.level} | ` +
                      `EXP:${this.exp} | Gold:${this.gold} | Karma:${this.karma} | ` +
                      `Sanity:${this.sanity} | Hope:${this.hope} | Days:${this.days_survived}<br>` +
                      `Inventory: ${this.inventory.join(', ') || 'Empty'}`;
           }
           
           addMemory(memory) {
               this.memories.push(memory);
               addToStory(`<span class="memory">[Memory added: ${memory}]</span>`);
           }
           
           changeHope(amount) {
               this.hope = Math.max(0, Math.min(100, this.hope + amount));
               if (amount > 0) {
                   addToStory(`<span class="hope-positive">The world feels a little brighter... (Hope +${amount})</span>`);
               } else {
                   addToStory(`<span class="hope-negative">Darkness spreads... (Hope ${amount})</span>`);
               }
           }
           
           addLoot(item) {
               this.inventory.push(item);
               addToStory(`You found: ${item}`);
           }
       }
       
       let player = null;
       let gameState = "init";
       let currentChoice = null;
       let battleState = null;
       
       function addToStory(text, delay = 50) {
           const storyElement = document.getElementById('story-text');
           storyElement.innerHTML += '<br>' + text;
           storyElement.scrollTop = storyElement.scrollHeight;
           updateStats();
       }
       
       function clearStory() {
           document.getElementById('story-text').innerHTML = '';
       }
       
       function updateStats() {
           if (player) {
               document.getElementById('player-stats').innerHTML = player.stats();
           }
       }
       
       function startGame() {
           const nameInput = document.getElementById('player-name');
           const name = nameInput.value.trim();
           
           if (!name) {
               alert('Please enter your name, wanderer.');
               return;
           }
           
           player = new Player(name);
           
           document.getElementById('name-input').classList.add('hidden');
           document.getElementById('game-input').classList.remove('hidden');
           document.getElementById('commands').classList.remove('hidden');
           
           clearStory();
           addToStory(`Welcome to the wasteland, ${player.name}.`);
           addToStory('Your choices will determine not just your fate, but the fate of hope itself.');
           addToStory('');
           addToStory('Day 1');
           addToStory('=' * 50);
           addToStory('What do you do?');
           
           gameState = "playing";
           
           // Enable enter key for commands
           document.getElementById('command-input').addEventListener('keypress', function(e) {
               if (e.key === 'Enter') {
                   processCommand();
               }
           });
       }
       
       function processCommand() {
           const input = document.getElementById('command-input');
           const command = input.value.trim().toLowerCase();
           input.value = '';
           
           if (command) {
               executeCommand(command);
           }
       }
       
       function executeCommand(cmd) {
           if (gameState !== "playing") return;
           
           checkGameOver();
           
           if (currentChoice) {
               handleChoice(cmd);
               return;
           }
           
           if (battleState) {
               handleBattle(cmd);
               return;
           }
           
           switch (cmd) {
               case 'stats':
                   addToStory(player.stats());
                   break;
               case 'wander':
                   wander();
                   break;
               case 'rest':
                   rest();
                   break;
               case 'remember':
                   remember();
                   break;
               case 'inventory':
                   addToStory(`You carry: ${player.inventory.join(', ') || 'Nothing but hope'}`);
                   break;
               case 'meditate':
                   meditate();
                   break;
               case 'quit':
                   quit();
                   break;
               default:
                   addToStory('In confusion, you hesitate. Time passes.');
                   break;
           }
           
           // Random sanity and hope decay
           if (Math.random() < 0.1) {
               player.sanity -= 1;
               player.changeHope(-1);
           }
       }
       
       function wander() {
           player.days_survived += 1;
           addToStory('');
           addToStory(`Day ${player.days_survived + 1}`);
           addToStory('=' * 50);
           
           // Random events
           if (Math.random() < 0.3) {
               meetNPC();
           } else if (Math.random() < 0.2) {
               criticalChoice();
           } else if (Math.random() < 0.6) {
               explore();
           } else {
               battle();
           }
       }
       
       function rest() {
           if (player.inventory.includes("Shelter")) {
               player.hp = Math.min(player.max_hp, player.hp + 20);
               player.sanity += 10;
               addToStory('You rest safely. Tomorrow brings new challenges.');
           } else {
               player.hp = Math.min(player.max_hp, player.hp + 10);
               player.sanity -= 5;
               addToStory('You rest fitfully in the open. The cold seeps into your bones.');
           }
       }
       
       function remember() {
           if (player.memories.length > 0) {
               addToStory('You remember...');
               player.memories.forEach(memory => {
                   addToStory(`- ${memory}`);
               });
               player.sanity += 5;
           } else {
               addToStory('Your memories are still being written.');
           }
       }
       
       function meditate() {
           addToStory('You sit in silence, remembering who you were before the world ended.');
           player.sanity += 10;
           player.hp = Math.min(player.max_hp, player.hp + 5);
       }
       
       function quit() {
           addToStory('Even in quitting, you make a choice.');
           addToStory('The world will remember what you did here.');
           gameOver();
       }
       
       function explore() {
           const locations = [
               {
                   id: "abandoned_school",
                   desc: "You find an abandoned school, children's drawings still on the walls...",
                   choices: ["Search the school", "Leave respectfully"]
               },
               {
                   id: "broken_bridge",
                   desc: "A bridge spans a chasm. Someone is calling for help from below...",
                   choices: ["Try to help", "Keep walking"]
               },
               {
                   id: "dying_tree",
                   desc: "An ancient tree withers. A small girl sits beneath it, crying...",
                   choices: ["Approach the girl", "Observe from distance"]
               },
               {
                   id: "refugee_camp",
                   desc: "Desperate people huddle around dying fires...",
                   choices: ["Share your gold", "Keep walking"]
               },
               {
                   id: "memory_shrine",
                   desc: "A shrine to the lost. Fresh flowers suggest someone still cares...",
                   choices: ["Add a name", "Leave an offering"]
               }
           ];
           
           const location = locations[Math.floor(Math.random() * locations.length)];
           addToStory(location.desc);
           
           currentChoice = {
               type: 'explore',
               location: location.id,
               choices: location.choices
           };
           
           addToStory(`Choose: ${location.choices.join(' or ')}`);
       }
       
       function handleChoice(choice) {
           if (currentChoice.type === 'explore') {
               handleExploreChoice(choice);
           } else if (currentChoice.type === 'npc') {
               handleNPCChoice(choice);
           } else if (currentChoice.type === 'critical') {
               handleCriticalChoice(choice);
           }
           
           currentChoice = null;
       }
       
       function handleExploreChoice(choice) {
           const location = currentChoice.location;
           
           if (location === "abandoned_school") {
               if (choice.includes("search")) {
                   if (Math.random() < 0.5) {
                       addToStory("You find a child's diary. The last entry: 'I hope someone remembers us.'");
                       player.addMemory("Found a child's final hope");
                       player.changeHope(10);
                   } else {
                       addToStory("You find nothing but echoes of laughter that will never return.");
                       player.sanity -= 10;
                   }
               } else {
                   addToStory("You whisper a prayer and move on. Some places deserve peace.");
                   player.karma += 5;
               }
           } else if (location === "broken_bridge") {
               if (choice.includes("help")) {
                   if (Math.random() < 0.6) {
                       addToStory("You risk everything to save them. They're just a child, lost and alone.");
                       addToStory("'Thank you,' they whisper. 'I thought no one cared anymore.'");
                       player.addMemory("Saved a child from the chasm");
                       player.changeHope(15);
                       player.karma += 15;
                       player.sanity += 10;
                   } else {
                       addToStory("You try to help, but the rope breaks. You watch them fall...");
                       addToStory("Their final scream echoes in your mind forever.");
                       player.sanity -= 25;
                       player.karma -= 10;
                       player.addMemory("Failed to save someone");
                   }
               } else {
                   addToStory("You walk away. Their cries follow you into the night.");
                   player.sanity -= 15;
                   player.karma -= 5;
               }
           } else if (location === "dying_tree") {
               if (choice.includes("approach")) {
                   addToStory("'My grandmother planted this tree,' she says without looking up.");
                   addToStory("'She said it would outlive us all. She was wrong.'");
                   currentChoice = {
                       type: 'explore',
                       location: 'dying_tree_comfort',
                       choices: ['Comfort her', 'Share your food']
                   };
                   addToStory("Choose: Comfort her or Share your food");
                   return;
               } else {
                   addToStory("You watch from afar, unsure how to help.");
                   player.sanity -= 5;
               }
           } else if (location === "dying_tree_comfort") {
               if (choice.includes("comfort")) {
                   addToStory("You sit beside her. Sometimes presence is enough.");
                   player.sanity += 5;
                   player.karma += 5;
               } else if (choice.includes("food") || choice.includes("share")) {
                   if (player.inventory.includes("Bread")) {
                       player.inventory.splice(player.inventory.indexOf("Bread"), 1);
                       addToStory("You share your bread. She smiles for the first time in months.");
                       player.changeHope(10);
                       player.karma += 10;
                   } else {
                       addToStory("You have no food to share. The guilt cuts deep.");
                       player.sanity -= 5;
                   }
               }
           } else if (location === "refugee_camp") {
               if (choice.includes("share") && player.gold >= 20) {
                   player.gold -= 20;
                   addToStory("Your gold feeds them for one more day. It's not much, but it's hope.");
                   player.changeHope(10);
                   player.karma += 10;
               } else {
                   addToStory("You have nothing to give. Your empty hands feel like betrayal.");
                   player.sanity -= 10;
               }
           } else if (location === "memory_shrine") {
               if (choice.includes("add")) {
                   addToStory("You carve a name into the stone. They will not be forgotten.");
                   player.addMemory("Honored someone at the shrine");
                   player.changeHope(5);
               } else if (choice.includes("offering") && player.inventory.length > 0) {
                   const item = player.inventory[Math.floor(Math.random() * player.inventory.length)];
                   player.inventory.splice(player.inventory.indexOf(item), 1);
                   addToStory(`You leave your ${item}. The dead deserve remembrance.`);
                   player.karma += 5;
               }
           }
       }
       
       function battle() {
           const enemies = [
               { name: "Hollow Survivor", desc: "A person who lost everything, now consumed by rage" },
               { name: "Shadow of Regret", desc: "Your past mistakes given form" },
               { name: "Despair Wraith", desc: "The embodiment of hopelessness" },
               { name: "Corrupted Guardian", desc: "A protector who failed and turned dark" }
           ];
           
           const enemy = enemies[Math.floor(Math.random() * enemies.length)];
           const enemy_hp = Math.floor(Math.random() * 31) + 30;
           
           addToStory(enemy.desc);
           addToStory(`The ${enemy.name} emerges from the shadows... HP: ${enemy_hp}`);
           
           battleState = {
               enemy_name: enemy.name,
               enemy_hp: enemy_hp,
               max_enemy_hp: enemy_hp
           };
           
           addToStory(`Your HP: ${player.hp} | Enemy HP: ${enemy_hp}`);
           addToStory('Choose: Fight, Mercy, or Flee');
       }
       
       function handleBattle(action) {
           if (action === "fight") {
               const dmg = Math.floor(Math.random() * 11) + 15;
               battleState.enemy_hp -= dmg;
               addToStory(`You strike with desperate fury! ${dmg} damage!`);
               
               if (battleState.enemy_hp > 0) {
                   const enemy_dmg = Math.floor(Math.random() * 11) + 10;
                   player.hp -= enemy_dmg;
                   player.sanity -= 2;
                   addToStory(`The ${battleState.enemy_name} claws at your soul! ${enemy_dmg} damage!`);
               }
           } else if (action === "mercy") {
               if (Math.random() < 0.3) {
                   addToStory("Your compassion reaches through the darkness...");
                   addToStory(`The ${battleState.enemy_name} remembers what they once were and fades peacefully.`);
                   player.karma += 10;
                   player.changeHope(5);
                   player.addMemory(`Showed mercy to ${battleState.enemy_name}`);
                   battleState = null;
                   return;
               } else {
                   addToStory("Your mercy is rejected! The enemy attacks with renewed fury!");
                   const enemy_dmg = Math.floor(Math.random() * 11) + 15;
                   player.hp -= enemy_dmg;
                   player.sanity -= 5;
               }
           } else if (action === "flee") {
               addToStory("You escape into the darkness...");
               player.sanity -= 5;
               battleState = null;
               return;
           }
           
           if (battleState.enemy_hp <= 0) {
               addToStory(`The ${battleState.enemy_name} falls... but victory feels hollow.`);
               const gained = Math.floor(Math.random() * 11) + 10;
               player.exp += gained;
               player.gold += Math.floor(Math.random() * 6) + 3;
               player.karma -= 2;
               addToStory(`Gained ${gained} EXP. Your soul feels heavier.`);
               
               if (Math.random() < 0.4) {
                   player.addLoot("Bitter Memory");
               }
               
               levelUp();
               battleState = null;
           } else if (player.hp > 0) {
               addToStory(`Your HP: ${player.hp} | Enemy HP: ${battleState.enemy_hp}`);
               addToStory('Choose: Fight, Mercy, or Flee');
           }
       }
       
       function meetNPC() {
           const npcs = [
               { name: "Elena", desc: "A doctor who still treats the wounded, though medicine is scarce" },
               { name: "Marcus", desc: "A father searching for his lost daughter" },
               { name: "The Chronicler", desc: "An old man who records the stories of the lost" },
               { name: "Anna", desc: "A young woman who maintains the last garden in the wasteland" }
           ];
           
           const npc = npcs[Math.floor(Math.random() * npcs.length)];
           
           if (!player.relationships[npc.name]) {
               player.relationships[npc.name] = 0;
               addToStory(`You meet ${npc.name}.`);
               addToStory(npc.desc);
               
               if (npc.name === "Elena") {
                   addToStory("'I've seen too much death,' she says. 'But I keep trying to heal.'");
                   currentChoice = {
                       type: 'npc',
                       npc: npc.name,
                       choices: ['Offer to help', 'Ask for healing']
                   };
                   addToStory("Choose: Offer to help or Ask for healing");
               } else if (npc.name === "Marcus") {
                   addToStory("'Have you seen a little girl? Brown hair, blue dress? She's all I have left.'");
                   currentChoice = {
                       type: 'npc',
                       npc: npc.name,
                       choices: ['Promise to look', 'Offer comfort']
                   };
                   addToStory("Choose: Promise to look or Offer comfort");
               } else if (npc.name === "The Chronicler") {
                   addToStory("'Stories are all we have left,' he says. 'They're how we remember who we were.'");
                   currentChoice = {
                       type: 'npc',
                       npc: npc.name,
                       choices: ['Share your story', 'Listen to his']
                   };
                   addToStory("Choose: Share your story or Listen to his");
               } else if (npc.name === "Anna") {
                   addToStory("'These flowers remember the world before,' she says, tending to wilted blooms.");
                   currentChoice = {
                       type: 'npc',
                       npc: npc.name,
                       choices: ['Help with the garden', 'Ask about the past']
                   };
                   addToStory("Choose: Help with the garden or Ask about the past");
               }
           }
       }
       
       function handleNPCChoice(choice) {
           const npc = currentChoice.npc;
           
           if (npc === "Elena") {
               if (choice.includes("help")) {
                   addToStory("You spend the day helping her tend to the wounded.");
                   player.relationships[npc] += 10;
                   player.karma += 10;
                   player.changeHope(5);
                   addToStory("Elena smiles sadly. 'Thank you. I'd forgotten what kindness looked like.'");
               } else {
                   if (player.hp < player.max_hp) {
                       player.hp = Math.min(player.max_hp, player.hp + 20);
                       addToStory("Elena tends to your wounds without asking for payment.");
                       player.relationships[npc] += 5;
                   }
               }
           } else if (npc === "Marcus") {
               if (choice.includes("promise")) {
                   addToStory("'Thank you,' he weeps. 'I won't give up. I can't give up.'");
                   player.addMemory("Promised to help Marcus find his daughter");
                   player.relationships[npc] += 15;
                   player.karma += 10;
               }
           } else if (npc === "The Chronicler") {
               if (choice.includes("share")) {
                   addToStory("You tell him of your journey. He writes it down with shaking hands.");
                   player.addMemory("Shared your story with the Chronicler");
                   player.sanity += 10;
                   player.relationships[npc] += 10;
               }
           } else if (npc === "Anna") {
               if (choice.includes("help")) {
                   addToStory("You work together in silence. New shoots push through the ash.");
                   player.changeHope(10);
                   player.relationships[npc] += 10;
                   player.sanity += 5;
               }
           }
       }
       
       function criticalChoice() {
           addToStory('');
           addToStory('=' * 50);
           addToStory('A MOMENT OF TRUTH');
           addToStory('=' * 50);
           
           addToStory("You find a group of starving children guarding a cache of food.");
           addToStory("They're armed with broken glass and desperation.");
           addToStory("You could easily take the food... but they would starve.");
           
           currentChoice = {
               type: 'critical',
               choices: ['Take the food', 'Share your supplies', 'Walk away']
           };
           
           addToStory("What defines you in this moment?");
           addToStory("Choose: Take the food, Share your supplies, or Walk away");
       }
       
       function handleCriticalChoice(choice) {
           if (choice.includes("take")) {
               addToStory("You take the food. The children scatter like frightened birds.");
               addToStory("You eat well tonight, but their faces haunt your dreams.");
               player.gold += 10;
               player.sanity -= 30;
               player.karma -= 25;
               player.changeHope(-15);
               player.addMemory("Took food from starving children");
           } else if (choice.includes("share")) {
               addToStory("You empty your pack, sharing everything you have.");
               addToStory("The children stare in disbelief. 'Why?' one asks.");
               addToStory("'Because someone has to care,' you reply.");
               player.inventory = [];
               player.gold = Math.max(0, player.gold - 10);
               player.karma += 25;
               player.changeHope(20);
               player.sanity += 15;
               player.addMemory("Shared everything with starving children");
           } else {
               addToStory("You walk away. Sometimes the right choice is the hardest.");
               player.sanity -= 10;
               player.karma += 5;
           }
       }
       
       function levelUp() {
           const required_exp = player.level * 30;
           if (player.exp >= required_exp) {
               player.level += 1;
               player.max_hp += 15;
               player.hp = player.max_hp;
               player.exp = 0;
               addToStory(`You've grown stronger... Level ${player.level}`);
               addToStory(`Max HP increased to ${player.max_hp}.`);
               addToStory("But strength alone won't save this world.");
           }
       }
       
       function checkGameOver() {
           if (player.hp <= 0) {
               addToStory("Darkness consumes you...");
               gameOver();
               return true;
           }
           
           if (player.sanity <= 0) {
               addToStory("You lose yourself to madness...");
               gameOver();
               return true;
           }
           
           if (player.days_survived >= 100) {
               addToStory("You've survived 100 days. The world is changing because of you.");
               gameOver();
               return true;
           }
           
           return false;
       }
       
       function gameOver() {
           gameState = "ended";
           
           addToStory('');
           addToStory('=' * 50);
           addToStory('YOUR JOURNEY ENDS');
           addToStory('=' * 50);
           
           addToStory(`You survived ${player.days_survived} days in this broken world.`);
           addToStory(`Your final karma: ${player.karma}`);
           addToStory(`The world's hope when you left: ${player.hope}`);
           
           if (player.karma > 50) {
               addToStory("You died as you lived - with compassion.");
               addToStory("The people you helped remember your name.");
               addToStory("In the darkness, you were alight.");
           }
           else if (player.karma > 0) {
             addToStory("You tried to do good in an impossible world.");
             addToStory("It wasn't always enough, but you tried.");
           }
           else {
             addToStory("The world broke you, as it broke so many others.");
             addToStory("In trying to survive, you lost what made you human.");
           }
         addToStory("Your memories:");
        player.memories.forEach(memory => {
            addToStory(`- ${memory}`);
        });
        
        addToStory(`Final Hope Level: ${player.hope}/100`);
        if (player.hope > 70) {
            addToStory("Against all odds, hope survived. The world might heal.");
        } else if (player.hope > 30) {
            addToStory("A flicker of hope remains. Perhaps it's enough.");
        } else {
            addToStory("Hope is nearly dead. The world grows darker.");
        }
        
        // Hide game controls
        document.getElementById('game-input').classList.add('hidden');
        document.getElementById('commands').classList.add('hidden');
        
        // Add restart button
        const restartButton = document.createElement('button');
        restartButton.textContent = 'Begin Again';
        restartButton.onclick = function() {
            location.reload();
        };
        restartButton.style.cssText = `
            padding: 15px 30px;
            font-size: 1.2em;
            background: #ffd700;
            color: #1a1a2e;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            display: block;
            margin-left: auto;
            margin-right: auto;
        `;
        document.querySelector('.container').appendChild(restartButton);
    }
    
    // Initialize the game
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('player-name').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startGame();
            }
        });
    });
</script>
